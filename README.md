# Макарова Анастасия. Дипломная работа по автоматизации тестов для сайта Читай-город.
## Направлена на автоматизацию тестирования отправки запросов по API и на автоматизацию тестирования функциональности пользовательского интерфейса.

### Работа состоит из 5 API-тестов и 5 UI-тестов

#### API-тесты

1. Добавление книги в корзину.
2. Открытие корзины и проверка наличия книги в ней.
3. Удаление книги из корзины.
4. Тест на валидность Статус-кода: добавление в корзину несуществующего товара (несуществующий id книги).
5. Тест на валидность Статус-кода: удаление из корзины книги с неверным ID (ID существующей книги, которой нет в корзине).

#### UI-тесты

Так как почти все тесты этой категории направлены на тестирование функционала кнопок, находящихся на странице конкретной книги (Оценить, Купить, Избранное, Перейти к описанию, КРОМЕ Открыть корзину), стартовой страницей решено было сделать страницу конкретной книги, а не главную страницу сайта, чтобы не тратить время на поисковой запрос и поиск книги в выдаче результатов поиска.

1. Кнопки "Оценить": при нажатии ниже появляется табличка с звёздами рейтинга.
2. Кнопка перехода в описание: при нажатии таблица прокручивается вниз на раздел "Описание и характеристики".
3. Кнопка "Купить": при нажатии книга добавляется в корзину и название кнопки меняется на "Оформить".
4. Значок "Корзина": при нажатии открывается корзина, где будет лежать добавленная ранее книга.
5. Значок "Избранное": при нажатии книга добавляется в описание, кнопка меняет класс.

### Описание файлов входящих в работу:

test_api.py - Файл с API-тестами.

api_class_page.py - Файл типа PageОbject с описанием классов, методов и переменных, используемых в API-тестах.

test_ui.py - Файл с UI-тестами.

ui_class_page.py - Файл типа PageОbject с описанием классов, методов и переменных, используемых в UI-тестах.

conftest.py - Файл с фикстурой, которая очищают тестируемое поле от тестовых данных после каждого теста.

config.py - Файл типа PageОbject с переменной для токена авторизации и отдельным классом с тестовыми данными, которые будут использоваться в работе. Проще говоря, именно оттуда будут браться id книг для подставления в тесты и оттуда будет извлекаться переменная с токеном авторизации, необходимым для некоторых тестов.

pytest.ini - Файл с кастомными маркерами для pytest.

requrements.txt - Текстовый файл с зависимостями и их версиями, используемыми в работе.

## Авторизация
Авторизация в интернет-магазине Читай-город реализована через отправку смс-сообщения на номер телефона пользователя, если аккаунта в системе нет, потребуется короткая регистрация с введением имени и фамилии пользователя и электронной почты. Для тестирования потребуется войти в аккаунт на сайте, и в дальнейшем просто извлекать недолговечный токен и подставлять в файле config.py.

## Токен авторизации
Так как токены от Читай-города очень быстро протухают, бесполезно их передавать для тестирования вместе с тестами.
Для тестирования подойдёт любой аккаунт Читай-города.
Токен авторизации можнo получить в личном кабинете на сайте https://www.chitai-gorod.ru/ через Devtools - Application - 
Cookies - https://www.chitai-gorod.ru/ - access-token.
Наглядный формат токена и в каком виде он должен быть использован указаны в файле config.py

## Запуск тестов 
### Проект поддерживает запуск автотестов в 3 режимах: 
Запуск только UI-тестов командой: pytest -m ui
Запуск только API-тестов командой: pytest -m api
Запуск всех тестов командой: pytest

Запуск тестов с сохранением документации результатов тестирования в виде отчёта Allure: pytest --alluredir=allure-results
Открытие отчёта Allure о тестировании в веб-варианте: allure serve allure-results

Ссылка на финальную курсовую работу, откуда были взяты и доработаны тесты: https://www.notion.so/1a46912f32b84efb92a7a93a0216e97c

